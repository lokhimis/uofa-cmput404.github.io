<!DOCTYPE html>
<html lang="en">
  <head>
        <title>CMPUT 404 - Lab 9 - Authentication</title>
      <meta charset="utf-8" />
      <meta name="generator" content="Pelican" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Web Applications and Architecture" />

  <link rel="icon" href="../theme/favicon.ico" />
  <link rel="stylesheet" type="text/css" href="../theme/style.css" />
  <link rel="stylesheet" type="text/css" href="../theme/404.css" />




    <meta name="tags" content="homework" />
    <meta name="tags" content="lab" />

  </head>

  <body>
    <header>
      <hgroup><h1><a href="../">CMPUT 404</a></h1><p>Web Applications and Architecture</p></hgroup>
      <nav><ul>
          <li><a href="/general/outline.html">Outline</a></li>
          <li><a href="/#eclass">eClass & Grades</a></li>
          <li><a href="/#schedule">Schedule</a></li>
          <li><a href="/general/labs.html">Labs</a></li>
          <li><a href="/general/project.html">Project</a></li>
          <li><a href="/general/individual.html">Participation</a></li>
          <li><a href="/general/resources.html">Resources</a></li>
          <li><a href="/general/help.html#discussion-forum">Discussion Forum</a></li>
          <li><a href="/#news-notices">News & Notices</a></li>
          <li><a href="/#lecture-zoom">Lecture Zoom</a></li>
          <li><a href="https://uofa-cmput404.github.io/slides-xt/">Slides</a></li>
          <li><a href="/general/help.html">Help</a></li>
      </ul></nav>
    </header>
    <main>
  <article>
    <header>
      <h2>
        <a href="../old_labs/lab-9.html" rel="bookmark"
           title="Permalink to Lab 9 - Authentication">Lab 9 - Authentication</a></h2>
      
    </header>
    <hr>
<p>Learn the basics of authentication for web applications. Explore the provided <a href="https://www.django-rest-framework.org/">Django Rest Framework</a> applications utilizing <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication#Basic_authentication_scheme">HTTP Basic</a>, <a href="https://www.django-rest-framework.org/api-guide/authentication/#tokenauthentication">HTTP Token</a>, and <a href="https://www.django-rest-framework.org/api-guide/authentication/#sessionauthentication">HTTP Session</a> authentication. Understand the high-level intention behind <a href="https://oauth.net/">OAuth</a>/<a href="https://oauth.net/2/">OAuth2</a> and the security implications behind these different authentication schemes.</p>
<p>Fork and clone the authentication lab repository.</p>
<ul>
<li><a href="https://github.com/uofa-cmput404/authentication-lab">github.com/uofa-cmput404/authentication-lab</a></li>
</ul>
<p>Follow the Getting Started instructions and run the application locally.</p>
<div class="highlight"><pre><span></span><code>virtualenv<span class="w"> </span>venv<span class="w"> </span>--python<span class="o">=</span>python3
<span class="nb">source</span><span class="w"> </span>venv/bin/activate
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements
./manage.py<span class="w"> </span>migrate
./manage.py<span class="w"> </span>createsuperuser
./manage.py<span class="w"> </span>runserver
</code></pre></div>

<p>Navigate to the <code>/api</code> route and log into the browsable API. Create a new code snippet.</p>
<p><strong>Question 1</strong>: What authentication scheme is used by default in Django Rest Framework's browsable API? How is this managed?</p>
<p>In a new terminal, use <code>httpie</code> to query the api endpoints.</p>
<div class="highlight"><pre><span></span><code>http<span class="w"> </span>POST<span class="w"> </span>http://127.0.0.1:8000/api/snippets/<span class="w"> </span><span class="nv">code</span><span class="o">=</span><span class="s2">&quot;print(123)&quot;</span>

http<span class="w"> </span>-a<span class="w"> </span>username:password<span class="w"> </span>POST<span class="w"> </span>http://127.0.0.1:8000/api/snippets/<span class="w"> </span><span class="nv">code</span><span class="o">=</span><span class="s2">&quot;print(123)&quot;</span>
</code></pre></div>

<p><strong>Question 2</strong>: What authentication scheme is used by <code>httpie</code> when querying with the <code>-a</code> or <code>--auth</code> option flag?</p>
<h5 id="configure-token-authentication">Configure Token Authentication</h5>
<p>Official documentation can be found <a href="https://www.django-rest-framework.org/api-guide/authentication/#tokenauthentication">here</a>.</p>
<p>Within <code>authlab/settings.py</code>, add <code>rest_framework.authtoken</code> into the <code>INSTALLED_APPS</code> setting. include <code>TokenAuthentication</code> in the Django Rest Framework settings.</p>
<div class="highlight"><pre><span></span><code><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="s1">&#39;rest_framework&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rest_framework.authtoken&#39;</span>
<span class="p">]</span>

<span class="c1"># ...</span>
<span class="c1"># Django Rest Framework</span>
<span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;DEFAULT_PAGINATION_CLASS&#39;</span><span class="p">:</span> <span class="s1">&#39;rest_framework.pagination.PageNumberPagination&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PAGE_SIZE&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s1">&#39;DEFAULT_AUTHENTICATION_CLASSES&#39;</span><span class="p">:</span> <span class="p">(</span>
        <span class="s1">&#39;rest_framework.authentication.BasicAuthentication&#39;</span><span class="p">,</span>
        <span class="s1">&#39;rest_framework.authentication.SessionAuthentication&#39;</span><span class="p">,</span>
        <span class="s1">&#39;rest_framework.authentication.TokenAuthentication&#39;</span>
    <span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p>Run <code>./manage.py migrate</code> after changing the settings.</p>
<p>Register the token model in the Django project admin dashboard. Update <code>client/admin.py</code> to be the following:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">rest_framework.authtoken.admin</span> <span class="kn">import</span> <span class="n">TokenAdmin</span>

<span class="n">TokenAdmin</span><span class="o">.</span><span class="n">raw_id_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,)</span>
</code></pre></div>

<p>Navigate to the Django admin dashboard and create a new token for your user.</p>
<p>Use <code>httpie</code> to create a new code snippet using token authentication.</p>
<p>Replace <code>YOUR_TOKEN</code> with your token in the following command:</p>
<div class="highlight"><pre><span></span><code>http<span class="w"> </span>POST<span class="w"> </span>http://127.0.0.1:8000/api/snippets/<span class="w"> </span><span class="s2">&quot;Authorization:Token YOUR_TOKEN&quot;</span><span class="w"> </span><span class="nv">code</span><span class="o">=</span><span class="s2">&quot;print(&#39;Token works&#39;)&quot;</span>
</code></pre></div>

<p>For example, if your token is <code>56b9afcaccad879e5bd9b39fe622927f17163092</code>,
then you should run the command:</p>
<div class="highlight"><pre><span></span><code>http<span class="w"> </span>POST<span class="w"> </span>http://127.0.0.1:8000/api/snippets/<span class="w"> </span><span class="s2">&quot;Authorization:Token 56b9afcaccad879e5bd9b39fe622927f17163092&quot;</span><span class="w"> </span><span class="nv">code</span><span class="o">=</span><span class="s2">&quot;print(&#39;Token works&#39;)&quot;</span>
</code></pre></div>

<p><strong>Question 3</strong>: What is the difference between <code>Session Authentication</code> and <code>Token Authentication</code>? How is <code>Token Authentication</code> an improvement over <code>Basic Authentication</code>?</p>
<h5 id="identity-and-authentication">Identity and Authentication</h5>
<p>Identity management on the web can be a difficult problem. Consider the following features a good web application may have for identity management:</p>
<ul>
<li>Forgot Password/Forgot Username workflows</li>
<li>Email verification</li>
<li>Sign in with <a href="https://developers.google.com/identity/sign-in/web/sign-in">Google</a>, <a href="https://developers.facebook.com/docs/facebook-login/">Facebook</a>, <a href="https://developer.github.com/v3/guides/basics-of-authentication/">GitHub</a>, <a href="https://en.wikipedia.org/wiki/List_of_OAuth_providers">etc.</a></li>
<li>Password-less authentication (<a href="https://auth0.com/blog/how-passwordless-authentication-works/">Medium, Slack, WhatsApp</a>)</li>
<li>Two Factor Authentication:<ul>
<li>by sending a One Time Password (OTP) through voice to a phone number</li>
<li>by sending a OTP text message to a mobile number</li>
<li>utilizing a Time-based or <a href="https://en.wikipedia.org/wiki/HMAC-based_One-time_Password_algorithm">HMAC-based OTP</a> algorithm</li>
<li>using Hardware Tokens (<a href="https://www.yubico.com/products/yubikey-hardware/">YubiKey</a>, <a href="https://www.kickstarter.com/projects/conorpatrick/solo-the-first-open-source-fido2-security-key-usb">Solo</a>)</li>
</ul>
</li>
</ul>
<p><strong>Question 4</strong>: Provide a high level summary of what happens during an OAuth2 authentication flow. For instance: <code>bitbucket.org</code> &gt; <code>Log In</code> &gt; <code>Log in with Google</code>. What happens when I click "Log in with Google"?</p>
<p><strong>Question 5</strong>: Please provide a link to your code.</p>
<ul>
<li>Hint: <a href="https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2">DigitalOcean introduction to OAuth2</a></li>
</ul>
<p><em>Optional</em>: Configure your Django project and Django Rest Framework API to utilize OAuth2.</p>
<ul>
<li><a href="https://auth0.com/docs/quickstart/webapp/django/01-login">Auth0 Django bindings and tutorial</a></li>
<li>Additionally, you can use <a href="https://github.com/jazzband/django-oauth-toolkit">github.com/jazzband/django-oauth-toolkit</a> to create an OAuth2 provider for others to use.</li>
<li><em>You are </em><em>not expected</em><em> to implement OAuth for your project!</em></li>
</ul>
    <footer>
      <p>Published: <time datetime="2019-02-20T14:47:00-07:00">
        Wed, 20 Feb 2019 at 14:47 MST
      </time></p>
        <p>Last updated: <time datetime="2019-03-07T18:17:00-07:00">
          Thu, 07 Mar 2019 at 18:17 MST
        </time></p>
        <address>
          By             <a href="../author/alexander-wong.html">Alexander Wong</a>
        </address>
        <p>
          Category: <a href="../category/old_labs.html">old_labs</a>
        </p>
        <p>
          Tags:
            <a href="../tag/homework.html">homework</a>
            <a href="../tag/lab.html">lab</a>
        </p>
    </footer>
  </article>
    </main>
    <footer>
      <address>
        Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>,
        which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
      </address>
    </footer>
  </body>
</html>