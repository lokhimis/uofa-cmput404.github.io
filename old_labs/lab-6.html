<!DOCTYPE html>
<html lang="en">
  <head>
        <title>CMPUT 404 - Lab 6 - Heroku</title>
      <meta charset="utf-8" />
      <meta name="generator" content="Pelican" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Web Applications and Architecture" />

  <link rel="icon" href="../theme/favicon.ico" />
  <link rel="stylesheet" type="text/css" href="../theme/style.css" />
  <link rel="stylesheet" type="text/css" href="../theme/404.css" />




    <meta name="tags" content="homework" />
    <meta name="tags" content="lab" />

  </head>

  <body>
    <header>
      <hgroup><h1><a href="../">CMPUT 404</a></h1><p>Web Applications and Architecture</p></hgroup>
      <nav><ul>
          <li><a href="/general/outline.html">Outline</a></li>
          <li><a href="/#eclass">eClass & Grades</a></li>
          <li><a href="/#schedule">Schedule</a></li>
          <li><a href="/general/labs.html">Labs</a></li>
          <li><a href="/general/project.html">Project</a></li>
          <li><a href="/general/individual.html">Participation</a></li>
          <li><a href="/general/resources.html">Resources</a></li>
          <li><a href="/general/help.html#discussion-forum">Discussion Forum</a></li>
          <li><a href="/#news-notices">News & Notices</a></li>
          <li><a href="/#lecture-zoom">Lecture Zoom</a></li>
          <li><a href="https://uofa-cmput404.github.io/slides-xt/">Slides</a></li>
          <li><a href="/general/help.html">Help</a></li>
      </ul></nav>
    </header>
    <main>
  <article>
    <header>
      <h2>
        <a href="../old_labs/lab-6.html" rel="bookmark"
           title="Permalink to Lab 6 - Heroku">Lab 6 - Heroku</a></h2>
      
    </header>
    <hr>
<p>Deploy the Django application created in <a href="../old_labs/lab-4.html">Lab 4</a> to <a href="https://www.heroku.com/">Heroku</a>. Understand the reasoning behind Platform as a Service (PaaS) businesses like Heroku. You may follow the <a href="https://devcenter.heroku.com/articles/django-app-configuration">official documentation</a>.</p>
<h5 id="setting-up-the-heroku-cli">Setting up the Heroku CLI</h5>
<p>Sign up for a free Heroku account at <a href="https://signup.heroku.com/">https://signup.heroku.com/</a>.</p>
<p>Download and install the <a href="https://devcenter.heroku.com/articles/heroku-cli#download-and-install">Heroku CLI tools</a>.</p>
<ul>
<li>Use the default installation instructions if you are on a VM or your own device.</li>
<li>If using a lab machine, download and extract the tarball and add the binary to your path.</li>
</ul>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>https://cli-assets.heroku.com/heroku-linux-x64.tar.gz
tar<span class="w"> </span>-xvf<span class="w"> </span>heroku-linux-x64.tar.gz
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">:</span><span class="nv">$HOME</span><span class="s2">/heroku/bin&quot;</span>
</code></pre></div>

<p>Ensure the heroku tool works, login to your account.</p>
<div class="highlight"><pre><span></span><code>heroku<span class="w"> </span>--version
<span class="c1"># heroku/7.19.4 linux-x64 node-v11.3.0</span>
heroku<span class="w"> </span>login
</code></pre></div>

<h5 id="deploying-our-django-application">Deploying our Django Application</h5>
<p>Ensure the Django application created in <a href="../old_labs/lab-4.html">Lab 4</a> is working locally.</p>
<p>Activate the virtualenv for the Django application.</p>
<p>Ensure that the current working directory is similar to the following.</p>
<div class="highlight"><pre><span></span><code>$ tree 
.
├── db.sqlite3
├── manage.py
├── mysite
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
└── polls
    ├── admin.py
    ├── apps.py
    ├── __init__.py
    ├── migrations
    │   ├── 0001_initial.py
    │   ├── __init__.py
    │   └── __pycache__
    │       ├── 0001_initial.cpython-37.pyc
    │       └── __init__.cpython-37.pyc
    ├── models.py
    ├── tests.py
    ├── urls.py
    └── views.py
</code></pre></div>

<p>Pip install <a href="https://gunicorn.org/">gunicorn</a> and <a href="https://github.com/pkrefta/django-on-heroku">django-on-heroku</a>.</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>gunicorn<span class="w"> </span>django-on-heroku
</code></pre></div>

<p>Save the new python requirements into the <em>requirements.txt</em> file.</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>freeze<span class="w"> </span>&gt;<span class="w"> </span>requirements.txt
</code></pre></div>

<p>Create a new file named <em>Procfile</em> for Heroku applications. The file shall have following contents:</p>
<div class="highlight"><pre><span></span><code>web: gunicorn mysite.wsgi
</code></pre></div>

<p>Within <em>mysite/settings.py</em>, add the following statements:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">django_on_heroku</span> <span class="c1"># top of the file</span>

<span class="c1"># ...</span>

<span class="n">django_on_heroku</span><span class="o">.</span><span class="n">settings</span><span class="p">(</span><span class="nb">locals</span><span class="p">())</span> <span class="c1"># bottom of the file</span>
</code></pre></div>

<p>Commit your files and deploy the application using a git integration.</p>
<p>What happens when you go to <code>/polls</code> on your Heroku deployed site?</p>
<p>Run your migrations, create a Superuser, and ensure your application functionality works.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>heroku<span class="w"> </span>run<span class="w"> </span>--app<span class="w"> </span>APPNAME<span class="w"> </span>python<span class="w"> </span>manage.py<span class="w"> </span>migrate
$<span class="w"> </span>heroku<span class="w"> </span>run<span class="w"> </span>--app<span class="w"> </span>APPNAME<span class="w"> </span>python<span class="w"> </span>manage.py<span class="w"> </span>createsuperuser
</code></pre></div>

<p><strong>Question 1</strong>: What are some ways you can deploy your code to Heroku?</p>
<p><strong>Question 2</strong>: What is a Procfile used for?</p>
<p><strong>Question 3</strong>: What is the link to your deployed application (on herokuapps)?</p>
<p>Optional: Configure TravisCI or CircleCI for a deployment pipeline that utilizes tests.</p>
    <footer>
      <p>Published: <time datetime="2019-01-07T12:41:00-07:00">
        Mon, 07 Jan 2019 at 12:41 MST
      </time></p>
        <p>Last updated: <time datetime="2019-02-11T17:58:00-07:00">
          Mon, 11 Feb 2019 at 17:58 MST
        </time></p>
        <address>
          By             <a href="../author/alexander-wong.html">Alexander Wong</a>
        </address>
        <p>
          Category: <a href="../category/old_labs.html">old_labs</a>
        </p>
        <p>
          Tags:
            <a href="../tag/homework.html">homework</a>
            <a href="../tag/lab.html">lab</a>
        </p>
    </footer>
  </article>
    </main>
    <footer>
      <address>
        Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>,
        which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
      </address>
    </footer>
  </body>
</html>